---
import ThemeToggle from './ThemeToggle.astro';
import CommandButton from './CommandButton.astro';

const pathname = Astro.url.pathname;

const navItems = [
  { href: '/projects', label: 'Projects', section: 'projects' as const },
  { href: '/ideas', label: 'Ideas', section: 'ideas' as const },
  { href: '/expertise', label: 'Expertise', section: 'services' as const },
  { href: '/about', label: 'About', section: 'about' as const },
  { href: '/contact', label: 'Contact', section: 'contact' as const },
];

function isActive(href: string) {
  if (href === '/') return pathname === '/';
  return pathname.startsWith(href);
}
---

<header class="hidden md:block sticky top-0 z-50 bg-[var(--color-bg)]/90 backdrop-blur-md border-b border-[var(--color-border)]" style="view-transition-name: site-header;">
  <div class="max-w-[1200px] mx-auto px-6 py-3">
    <nav class="flex items-center justify-between">
      <!-- Logo with cursor -->
      <a
        href="/"
        class="text-[var(--color-text)] font-semibold hover:no-underline hover:text-[var(--color-accent)] transition-colors"
      >
        Julian Ross
      </a>

      <!-- Right: Nav + Theme -->
      <div class="flex items-center gap-3">
        {navItems.map((item) => (
          <CommandButton
            href={item.href}
            command={item.label}
            active={isActive(item.href)}
            size="sm"
            section={item.section}
          />
        ))}
        <div class="w-px h-6 bg-[var(--color-border)] mx-2"></div>
        <ThemeToggle />
      </div>
    </nav>
  </div>
</header>
