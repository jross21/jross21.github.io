---
/**
 * GitStats - Display statistics with themed SVG icons
 *
 * Replaces emoji icons with custom SVG components for better
 * theming and visual consistency.
 */
import ChartIcon from './graphics/icons/ChartIcon.astro';
import TargetIcon from './graphics/icons/TargetIcon.astro';
import RocketIcon from './graphics/icons/RocketIcon.astro';
import CalendarIcon from './graphics/icons/CalendarIcon.astro';
import UsersIcon from './graphics/icons/UsersIcon.astro';
import PipelineIcon from './graphics/icons/PipelineIcon.astro';

interface Stat {
  icon: string;
  value: string;
  label: string;
}

interface Props {
  stats: Stat[];
}

const { stats } = Astro.props;

// Map icon names to unicode for simple icons
const unicodeIcons: Record<string, string> = {
  star: '★',
  lightning: '⚡',
  clock: '⏱',
  check: '✓',
  arrow: '→',
};

// Icons that use SVG components
const svgIconNames = ['chart', 'target', 'rocket', 'calendar', 'users', 'pipeline'];

function hasUnicodeIcon(iconName: string): boolean {
  return iconName in unicodeIcons;
}

function hasSvgIcon(iconName: string): boolean {
  return svgIconNames.includes(iconName);
}
---

<div class="git-stats">
  {stats.map((stat) => (
    <div class="git-stat">
      <span class="git-stat__icon">
        {hasUnicodeIcon(stat.icon) ? (
          unicodeIcons[stat.icon]
        ) : hasSvgIcon(stat.icon) ? (
          stat.icon === 'chart' ? <ChartIcon size={18} /> :
          stat.icon === 'target' ? <TargetIcon size={18} /> :
          stat.icon === 'rocket' ? <RocketIcon size={18} /> :
          stat.icon === 'calendar' ? <CalendarIcon size={18} /> :
          stat.icon === 'users' ? <UsersIcon size={18} /> :
          stat.icon === 'pipeline' ? <PipelineIcon size={18} /> :
          stat.icon
        ) : (
          stat.icon
        )}
      </span>
      <span class="git-stat__value">{stat.value}</span>
      <span>{stat.label}</span>
    </div>
  ))}
</div>

<style>
  .git-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    font-family: var(--font-sans);
    font-size: 0.875rem;
  }

  .git-stat {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    color: var(--color-text-muted);
  }

  .git-stat__icon {
    font-size: 1rem;
    display: flex;
    align-items: center;
    color: var(--color-accent);
  }

  .git-stat__value {
    color: var(--color-accent);
    font-weight: 500;
  }
</style>
